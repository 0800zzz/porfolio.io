---
export interface Props {
  href: string;
  title: string;
  excerpt?: string;
  date?: Date;
  tags?: string[];
  heroImage?: string;
  difficulty?: "easy" | "medium" | "hard" | "insane";
}

const {
  href,
  title,
  excerpt,
  date,
  tags = [],
  heroImage,
  difficulty
} = Astro.props;

const diffStyles: Record<string, string> = {
  easy: "text-emerald-400 bg-emerald-400/10 border-emerald-400/40",
  medium: "text-yellow-400 bg-yellow-400/10 border-yellow-400/40",
  hard: "text-orange-400 bg-orange-400/10 border-orange-400/40",
  insane: "text-red-500 bg-red-500/10 border-red-500/40",
};
---

<a
  href={href}
  class="group block rounded-2xl border border-white/10 bg-black/40 transition
         hover:border-emerald-400/40 hover:bg-black/60"
>
  {heroImage && (
    <img
      src={heroImage}
      alt={title}
      class="h-40 w-full rounded-t-2xl object-cover opacity-90 group-hover:opacity-100 transition"
      loading="lazy"
      />
  )}

  <div class="p-4">
    <!-- title + difficulty -->
    <div class="flex items-start justify-between gap-3">
      <h3 class="text-lg font-semibold text-white group-hover:text-emerald-300 transition leading-snug">
        {title}
      </h3>

      {difficulty && (
        <span
          class={`shrink-0 rounded-md border px-2 py-0.5 text-[11px] font-mono uppercase tracking-wide ${diffStyles[difficulty]}`}
        >
          {difficulty}
        </span>
      )}
    </div>

    {date && (
      <p class="mt-1 text-xs font-mono text-white/40">
        {new Date(date).toLocaleDateString()}
      </p>
    )}

    {excerpt && (
      <p class="mt-2 text-sm text-white/70 line-clamp-3">
        {excerpt}
      </p>
    )}

    {tags.length > 0 && (
      <div class="mt-3 flex flex-wrap gap-2">
        {tags.map((t) => (
          <span
            class="rounded-full border border-white/10 px-2 py-0.5
                   text-[11px] font-mono text-white/60"
          >
            {t}
          </span>
        ))}
      </div>
    )}
  </div>
</a>
