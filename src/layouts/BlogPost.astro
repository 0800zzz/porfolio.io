---
export interface Props {
  href: string;
  title: string;
  excerpt?: string;
  date?: Date;
  tags?: string[];
  heroImage?: string;
}
const { href, title, excerpt, date, tags = [], heroImage } = Astro.props as Props;

// Normaliza: remueve barras finales duplicadas y asegura UNA barra al final
const normalize = (url: string) => (url ?? "").replace(/\/+$/, "") + "/";
const safeHref = normalize(href);
---

<a href={safeHref} class="block rounded-2xl border border-white/10 hover:border-white/20 transition overflow-hidden">
  {heroImage ? (
    <img src={heroImage} alt={title} class="w-full h-40 object-cover" loading="lazy" />
  ) : null}
  <div class="p-4">
    <h3 class="text-lg font-semibold">{title}</h3>
    {date && <p class="text-xs text-white/50 mt-1">{new Date(date).toLocaleDateString()}</p>}
    {excerpt && <p class="text-white/70 mt-2 line-clamp-3">{excerpt}</p>}
    {tags.length ? (
      <div class="mt-3 flex flex-wrap gap-2">
        {tags.map((t) => (
          <span class="px-2 py-0.5 text-xs bg-white/10 rounded-full">#{t}</span>
        ))}
      </div>
    ) : null}
  </div>
</a>
